import flash.events.Event;
import flash.events.KeyboardEvent;

var delta_fi:Number=2;
var delta_dR:Number=0.3;
var fi:Number=0;//kierunek jazdy
var fi_rad:Number=0;
var k:Number=Math.PI/180;
var dR:Number=0; //prêdkoœæ
var k_right:Boolean=false;
var k_left:Boolean =false;
var k_down:Boolean =false;
var k_up:Boolean   =false;

stage.addEventListener( Event.ENTER_FRAME,fun);
stage.addEventListener(KeyboardEvent.KEY_DOWN,fun_down);
stage.addEventListener(KeyboardEvent.KEY_UP,fun_up);

function fun_down(e:KeyboardEvent):void{
	if(e.keyCode==Keyboard.RIGHT) k_right=true;
	if(e.keyCode==Keyboard.LEFT ) k_left =true;
	if(e.keyCode==Keyboard.DOWN ) k_down =true;
	if(e.keyCode==Keyboard.UP   ) k_up   =true;
}
function fun_up(e:KeyboardEvent):void{
	if(e.keyCode==Keyboard.RIGHT) k_right=false;
	if(e.keyCode==Keyboard.LEFT ) k_left =false;
	if(e.keyCode==Keyboard.DOWN ) k_down =false;
	if(e.keyCode==Keyboard.UP   ) k_up   =false;
} 
function fun( e:Event ):void
{
	if(k_right) {fi-=delta_fi;}
	if(k_left ) {fi+=delta_fi;}
	if(k_down ) dR-=delta_dR;
	if(k_up   ) dR+=delta_dR;
    var _point:Point = localToGlobal(new Point(200,200));
    if(!main.trasa.hitTestPoint(_point.x,_point.y,true)) {dR*=0.9;}
	fi_rad=k*fi;
	main.trasa.y+=dR*Math.cos(fi_rad);
	main.trasa.x+=dR*Math.sin(fi_rad);
	main.rotation=fi;
	main.auto.rotation=-fi;
}


